## LAB01-1. Основы работы в командной строке

1. С помощью механизма дополнения имен команд выведите все команды, которые начинаются на «**ls**».

2. С помощью механизма дополнения имен переменных выведите все переменные, которые начинаются с «**HIST**».

3. Узнайте, сколько команд может храниться в файле истории.

4. Выведите имена файлов и каталогов из домашнего каталога, которые начинаются с «**.c**».

5. Настройте вывод даты выполнения команд, хранящихся в истории.

6. Настройте автоматическое сохранение набираемых команд в файле истории:

- введите любую команду, например, команду **date**;
- проверьте, есть ли эта команда в кэше и файле истории команд;
- определите переменную **PROMPT_COMMAND** так, чтобы кэш истории сохранялся в файле истории;
- введите любую команду и проверьте,  появилась ли эта команда в кэше и файле истории.

7. Создайте переменную **DATE**, в которую запишите текущую дату. Проверьте содержимое переменной.

8. Создайте переменную **TIME**, в которую запишите текущее время. Проверьте содержимое переменной.

9. Создайте переменную **DATE_TIME**, в которую поместите значения из переменных DATE и TIME, разделенных пробелом. Проверьте содержимое переменной.

10. Выведите имена файлов, содержащие хотя бы одну цифру, из каталогов **/bin** и **/sbin**.


11. Сделайте так, чтобы при выполнении команды **sudo vipw** автоматически вызывался редактор **mcedit**.

12. Измените приглашение так, чтобы выводились имя хоста, имя пользователя и время:

Используйте переменные bash и команду date.

- Запустите еще один bash. Какой вид у приглашения и почему?
- Выйдите из запущенного командного интерпретатора bash.

13. Сделайте так, чтобы в запускаемом интерпретаторе bash выводилось приглашение, установленное в родительском интерпретаторе bash.

14. Одной командной строкой создайте в домашнем каталоге подкаталоги для каждого месяца текущего года вида YYYY-MM (год реализуйте с помощью команды **date** и командной подстановки).

15. Постарайтесь сократить запись команды предыдущего задания, используя свойство bash — дописывать лидирующие нули при перечислении.


## Решение

1. С помощью механизма дополнения имен команд выведите все команды, которые начинаются на «**ls**».

```bash
ls
```

Пример результата:

```
[sa@s1-alma ~]$ ls
ls        lscpu     lsiio     lsirq     lsmcli    lsmod     lspci     lsusb.py
lsattr    lsgpio    lsinitrd  lslocks   lsmd      lsns      lsscsi
lsblk     lshw      lsipc     lslogins  lsmem     lsof      lsusb
```

2. С помощью механизма дополнения имен переменных выведите все переменные, которые начинаются с «**HIST**».


```bash
echo $HIST<TAB><TAB>
```

Пример результата:

```
[sa@s1-alma ~]$ echo $HIST
$HISTCMD       $HISTCONTROL   $HISTFILE      $HISTFILESIZE  $HISTSIZE
```

3. Узнайте, сколько команд может храниться в файле истории.

```bash
echo $HISTFILESIZE
```

Пример результата:

```
[sa@s1-alma ~]$ echo $HISTFILESIZE
1000
```

4. Выведите имена файлов и каталогов из домашнего каталога, которые начинаются с «**.c**».

```bash
echo ~/.c*
```

Пример результата:

```
[sa@s1-alma ~]$ echo ~/.c*
/home/sa/.cache /home/sa/.config
```

5. Настройте вывод даты выполнения команд, хранящихся в истории.

```bash
 HISTTIMEFORMAT="%D "
history
echo  'HISTTIMEFORMAT="%D "' >> ~/.bashrc
```

Пример результата:

```
[sa@s1-alma ~]$ history
    1  11/23/23 sudo hostnamectl set-hostname s1-alma.mt.local
    2  11/23/23 reboot
    3  11/23/23 sudo reboot
    4  11/23/23 ip a
```

6. Настройте автоматическое сохранение набираемых команд в файле истории:

- введите любую команду, например, команду **date**;
- проверьте, есть ли эта команда в кэше и файле истории команд;

```bash
history
tail ~/.bash_history
```

- определите переменную **PROMPT_COMMAND** так, чтобы кэш истории сохранялся в файле истории;

```bash
PROMPT_COMMAND="history -a"
echo 'PROMPT_COMMAND="history -a"' >> ~/.bashrc
```

- введите любую команду и проверьте,  появилась ли эта команда в кэше и файле истории.

```bash
ls
history
tail ~/.bash_history
```

Пример результата:

```
[sa@s1-alma ~]$ tail ~/.bash_history
#1700743953
tail ~/.bash_history
#1700743964
PROMPT_COMMAND=´history -a´
#1700743979
PROMPT_COMMAND="history -a"
#1700743996
ls
#1700743998
history
```

7. Создайте переменную **DATE**, в которую запишите текущую дату. Проверьте содержимое переменной.

```bash
DATE=$(date +%d-%m-%Y)
echo $DATE
```

Пример результата:

```
[sa@s1-alma ~]$ DATE=$(date +%d-%m-%Y)
[sa@s1-alma ~]$ echo $DATE
23-11-2023
```

8. Создайте переменную **TIME**, в которую запишите текущее время. Проверьте содержимое переменной.

```bash
TIME=$(date +%T)
echo $TIME
```

Пример результата:

```
[sa@s1-alma ~]$ TIME=$(date +%T)
echo $TIME
15:59:54
```

9. Создайте переменную **DATE_TIME**, в которую поместите значения из переменных DATE и TIME, разделенных пробелом. Проверьте содержимое переменной.

```bash
DATE_TIME="$DATE $TIME"
echo $DATE_TIME
```

Пример результата:

```
[sa@s1-alma ~]$ DATE_TIME="$DATE $TIME"
[sa@s1-alma ~]$ echo $DATE_TIME
23-11-2023 15:59:54
```

10.  Выведите имена файлов, содержащие хотя бы одну цифру, из каталогов **/bin** и **/sbin**.

```bash
echo /{s,}bin/*[0-9]*
```

Пример результата:

```
[sa@s1-alma ~]$ echo /{s,}bin/*[0-9]*
/sbin/cups-genppd.5.3 /sbin/dumpe2fs /sbin/e2freefrag /sbin/e2fsck /sbin/e2image /sbin/e2label /sbin/e2mmpstatus /sbin/e2undo /sbin/e4crypt /sbin/e4defrag /sbin/fsck.ext2 /sbin/fsck.ext3 /sbin/fsck.ext4 /sbin/g13-syshelp /sbin/grub2-bios-setup /sbin/grub2-get-kernel-settings /sbin/grub2-install /sbin/grub2-mkconfig /sbin/grub2-probe /sbin/grub2-reboot /sbin/grub2-set-bootflag /sbin/grub2-set-default /sbin/grub2-set-password /sbin/grub2-setpassword /sbin/grub2-switch-to-blscfg /sbin/ip6tables /sbin/ip6tables-nft /sbin/ip6tables-nft-restore
```

11.  Сделайте так, чтобы при выполнении команды **sudo vipw** автоматически вызывался редактор **mcedit**.

```bash
export EDITOR=mcedit
sudo vipw
```

Все так же открывается через **vi**

Добавьте строку: 

```
Defaults:%wheel env_keep += "EDITOR"
```

в файл '/etc/sudoers/' с помощью команды `sudo visudo` и снова запустите команду

```bash
sudo vipw
```

теперь файл открывается в **mcedit**.

12. Измените приглашение так, чтобы выводились имя хоста, имя пользователя и время:

```bash
имя_пользователя@имя_хоста-HH:MM>
```

Используйте переменные bash и команду date.

```bash
PS1='\u@\h-$(date +%H:%M)> '
```
Пример результата:
```
[sa@s1-alma ~]$ PS1='\u@\h-$(date +%H:%M)> '
sa@s1-alma-16:32>
```

- Запустите еще один bash. Какой вид у приглашения и почему?
- Выйдите из запущенного командного интерпретатора bash.

Пример результата:

```
[sa@s1-alma ~]$ PS1='\u@\h-$(date +%H:%M)> '
sa@s1-alma-16:32> bash
[sa@s1-alma ~]$ exit
exit
sa@s1-alma-16:34>
```
13. Сделайте так, чтобы в запускаемом интерпретаторе bash выводилось приглашение, установленное в родительском интерпретаторе bash.

```bash
export PS1
bash --norc
```

Пример результата:
```
sa@s1-alma-16:34> export PS1
sa@s1-alma-16:34> bash --norc
sa@s1-alma-16:35> exit
exit
sa@s1-alma-16:35>
```

14. Одной командной строкой создайте в домашнем каталоге подкаталоги для каждого месяца текущего года вида YYYY-MM (год реализуйте с помощью команды **date** и командной подстановки).

```bash
mkdir $(date +%Y)-0{1..9} $(date +%Y)-1{0..2} -v
```

Пример результата:
```
sa@s1-alma-16:35> mkdir $(date +%Y)-0{1..9} $(date +%Y)-1{0..2} -v
mkdir: создан каталог '2023-01'
mkdir: создан каталог '2023-02'
mkdir: создан каталог '2023-03'
mkdir: создан каталог '2023-04'
mkdir: создан каталог '2023-05'
mkdir: создан каталог '2023-06'
mkdir: создан каталог '2023-07'
mkdir: создан каталог '2023-08'
mkdir: создан каталог '2023-09'
mkdir: создан каталог '2023-10'
mkdir: создан каталог '2023-11'
mkdir: создан каталог '2023-12'
```

15. Постарайтесь сократить запись команды предыдущего задания, используя свойство bash — дописывать лидирующие нули при перечислении. Удалите ранее созданные каталоги командой `rm -rf 202* -v`

```bash
mkdir $(date +%Y)-{01..12} -v
```

Пример результата:
```
sa@s1-alma-16:38> rm -rf 202* -v
удалён каталог '2023-01'
удалён каталог '2023-02'
удалён каталог '2023-03'
удалён каталог '2023-04'
удалён каталог '2023-05'
удалён каталог '2023-06'
удалён каталог '2023-07'
удалён каталог '2023-08'
удалён каталог '2023-09'
удалён каталог '2023-10'
удалён каталог '2023-11'
удалён каталог '2023-12'
sa@s1-alma-16:39> mkdir $(date +%Y)-{01..12} -v
mkdir: создан каталог '2023-01'
mkdir: создан каталог '2023-02'
mkdir: создан каталог '2023-03'
mkdir: создан каталог '2023-04'
mkdir: создан каталог '2023-05'
mkdir: создан каталог '2023-06'
mkdir: создан каталог '2023-07'
mkdir: создан каталог '2023-08'
mkdir: создан каталог '2023-09'
mkdir: создан каталог '2023-10'
mkdir: создан каталог '2023-11'
mkdir: создан каталог '2023-12'
```