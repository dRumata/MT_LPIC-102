## LAB03-1. Учетные записи пользователей.

#### 1. Смена учетных записей пользователей

1. Войдите в свою систему как непривилегированный пользователь и откройте терминал.

2. Введите `whoami`, чтобы узнать, какую учетную запись вы используете в настоящее время. 

3. Введите `id` и обратите внимание, что вы получите более подробную информацию о ваших текущих учетных данных при использовании `id`.

Пример сообщения в терминале:

```
uid=1000(sa) gid=1000(sa) группы=1000(sa),10(wheel) контекст=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
```

4. Введите `su`. При запросе пароля введите пароль **root**. Введите `id` еще раз. Вы видите, что в настоящее время вы являетесь пользователем **root**. Если вам не известен пароль **root** или он не установлен, введите `sudo su -`

Пример сообщения в терминале:

```
[sa@s1-alma ~]$ su
Пароль:
su: Сбой при проверке подлинности
[sa@s1-alma ~]$ sudo su -
[sudo] пароль для sa:
[root@s1-alma ~]# id
uid=0(root) gid=0(root) группы=0(root) контекст=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
```

5. Введите `visudo` и убедитесь, что строка `%wheel ALL=(ALL) ALL` есть и не закомментирована.

Пример сообщения в терминале:

```
...
## Allows people in group wheel to run all commands
%wheel  ALL=(ALL)       ALL
...
```

6. Введите `useradd -G wheel laura`, чтобы создать пользователя **laura**, который является членом группы **wheel**.

7. Введите `id laura`, чтобы убедиться, что пользователь **laura** добавлен в группу **wheel**.

Пример сообщения в терминале:

```
[root@s1-alma ~]# useradd -G wheel laura
[root@s1-alma ~]# id laura
uid=1001(laura) gid=1001(laura) группы=1001(laura),10(wheel)
```

8. Установите пароль для пользователя **laura**, набрав `passwd laura`. Дважды введите пароль **pass**.

Пример сообщения в терминале:

```
[root@s1-alma ~]# passwd laura
Изменение пароля пользователя laura.
Новый пароль:
НЕУДАЧНЫЙ ПАРОЛЬ: Пароль должен содержать не менее 8 символов
Повторите ввод нового пароля:
passwd: данные аутентификации успешно обновлены.
```

9. Выйдите из системы и войдите как **laura**.

10. Введите `sudo useradd lori`. Обратите внимание, что был создан пользователь **lori**. Создайте пароль для пользователя **lori**.

### 2. Создание учетных записей пользователей. Унификация.

11. Введите `vim /etc/login.defs`, чтобы открыть файл конфигурации **/etc/login.defs** и изменить несколько параметров, прежде чем вы начнете создавать пользователей. Найдите параметр **CREATE_HOME** и убедитесь, что для него установлено значение «**yes**».

12. Используйте `cd /etc/skel`, чтобы перейти в каталог **/etc/skel**. 

13. Добавьте два каталога **Pictures** и **Documents** по умолчанию во все домашние каталоги пользователей. Для этого в каталоге /etc/skel создайте два этих каталога

```bash
mkdir /etc/skel/{Pictures,Documents} -v
```

14. Измените содержимое файла **.bashrc**, включив в него строку **export EDITOR=/usr/bin/nvim**, которая устанавливает редактор по умолчанию для инструментов, для которых необходимо изменять текстовые файлы.

15. Введите `useradd linda`, чтобы создать учетную запись для пользователя **linda**. 

16. Введите `id linda`, чтобы убедиться, что **linda** является членом группы с именем **linda**. 

17. Убедитесь, что в домашнем каталоге пользователя **linda** были созданы каталоги **Pictures** и **Documents**.

18. Используйте `passwd linda`, чтобы установить пароль для только что созданного пользователя. Используйте пароль **password**.

19. Введите `passwd -n 30 -w 3 -x 90 linda`, чтобы изменить свойства пароля. Срок действия пароля истекает через **90** дней (**-x 90**). За три дня до истечения срока действия пользователь получит предупреждение (**-w 3**), и пароль необходимо использовать не менее **30** дней, прежде чем (**-n 30**) его можно будет изменить.

20. Создайте еще несколько пользователей: **stiven**, **fry** и **bob**.

21. Используйте команду `grep stiven /etc/passwd /etc/shadow /etc/group`. Утилита grep покажет пользователья **stiven**, созданного во всех трех важных файлах, и подтверждает, что они были настроены правильно.

### 3. Работа с группами

22. Введите `groupadd sales`, а затем `groupadd account`, чтобы добавить группы с именами **sales** и **account**.

23. Используйте `usermod`, чтобы добавить пользователей **linda** и **laura** в группу **sales**, а **fry** и **bob** - в учетную запись группы **account**:
```bash
usermod -aG sales linda
usermod -aG sales laura
usermod -aG account fry
usermod -aG account bob
```

24. Введите `id linda`, чтобы убедиться, что пользователь **linda** правильно добавлена в группу **sales**. В результатах этой команды вы видите, что **linda** назначена в группу с именем **linda**. Это ее основная группа, обозначенная параметром **gid**. Параметр групп показывает все группы, в которых она в настоящее время состоит, включая первичную группу, а также вторичные групповые продажи, в которые она только что была назначена.

Пример сообщения в терминале:

```console
uid=1000(linda) gid=1000(linda) groups=1000(linda),1001(sales)
```

25.   Просмотрите последние **15** строк файла **/etc/group/**, для этого используйте команду **tail** c необходимымим ключами и аргументами.

Пример сообщения в терминале:

```console
[sa@s1-alma ~]$ tail -n15 /etc/group
gdm:x:42:
gnome-initial-setup:x:979:
sshd:x:74:
dnsmasq:x:978:
chrony:x:977:
slocate:x:21:
tcpdump:x:72:
sa:x:1000:
laura:x:1001:
linda:x:1002:
stiven:x:1003:
fry:x:1004:
bob:x:1005:
sales:x:1006:linda,laura
account:x:1007:fry,bob
```