## LAB16-1. Конфигурация сетевых интерфейсов

#### 1. Проверка конфигурации сети 

1. Откройте shell.

2. Введите команду
```
ip -s link
```
В выводе команды отображаются все существующие сетевые подключения, а также статистика о количестве отправленных пакетов и связанные сообщения об ошибках.

3. Введите `ip addr show`. Вы увидите текущие назначения адресов для сетевых интерфейсов на вашем сервере.


#### 2. Проверка сетевых настроек 

4. Откройте shell на вашем сервере и введите 
```
ip addr show
```
Вывод команды показывает текущую конфигурацию сети. Обратите внимание на используемый IPv4-адрес и используемые имена сетевых устройств; они понадобятся вам позже в этом упражнении. 

5. Введите `ip route show`, чтобы проверить конфигурацию маршрутизации. 
   
6. Если ваш компьютер подключен к Интернету, вы можете использовать команду ping, чтобы убедиться, что соединение с Интернетом работает правильно. Введите например
```bash
ping -c 4 8.8.8.8
```
чтобы отправить четыре пакета на IP-адрес 8.8.8.8. Если ваше Интернет-соединение установлено и работает, вы должны получить ответы «echo reply». 

7. Это временно установит новый IP-адрес: 
```bash
ip addr add 10.0.0.[LAST_NUMBER]/24 dev <yourdevicename>
```
> Здесь **LAST_NUMBER** необходимо взять из вашего действительного ip после последней точки.

8. Введите `ip addr show`. Вы увидите только что установленный IP-адрес в дополнение к IPадресу, который уже использовался. 
>![Screenshot](../img/scr.png) ***Cделайте скриншот экрана c результатом выполнения задания для отправки отчета.***

9. Введите `ifconfig`. Обратите внимание, что вы **не** видите только что установленный IP-адрес (и нет параметров с командой **ifconfig**, которые позволили бы вам его увидеть). Это один из примеров того, почему вам больше не рекомендуется использовать команду **ifconfig**. 

10. Для того чтобы увидить список всех портов UDP и TCP, которые прослушиваются на вашем сервере, введите
```bash
ss -tul
ss -tunl
```
Какая информация отличается при использовании ключа  `-n`?


#### 3. Управление сетевыми подключениями с помощью nmcli 

В этом упражнении вы создаете новое соединение и будете управлять его статусом. Это соединение необходимо подключить к сетевому устройству. В этом упражнении используется устройство **ens33**. При необходимости измените его на имя сетевого устройства, используемого на вашем компьютере

11. Создайте новое сетевое соединение **lab-dhcp**, набрав 
```bash
nmcli con add con-name lab-dhcp type ethernet ifname ens33 ipv4.method auto. 
```

12. Создайте соединение с именем **lab-stat**, чтобы определить статический IP-адрес и шлюз:
```bash
nmcli con add con-name lab-stat ifname ens33 autoconnect no type ethernet ip4 10.0.0.[LAST_NUMBER]/24 gw4 10.0.0.1 ipv4.method manual
```
 Шлюз может не существовать в вашей конфигурации, но это не имеет значения.

13. Введите `nmcli con show`, чтобы отобразить соединения, и используйте `nmcli con up static`, чтобы активировать статическое соединение. 

14. Проверьте доступность сервера тренера (ip-адрес уточните перед началом лабораторной работы)

>![Screenshot](../img/scr.png) ***Cделайте скриншот экрана c результатом выполнения задания для отправки отчета.***

15. Вернитесь к DHCP-соединению, используя `nmcli con up lab-dhcp`.

#### 4 Изменение параметров подключения с помощью nmcli 

16. Убедитесь, что статическое соединение не подключается автоматически при использовании статического соединения 
```bash 
nmcli con mod lab-stat connection.autoconnect no
``` 
17. Добавьте DNS-сервер к статическому соединению
```bash
nmcli con mod lab-stat ipv4.dns 1.1.1.1
``` 
Обратите внимание, что при добавлении сетевого подключения вы используете **ip4**, но при изменении параметров для существующего подключения вы часто вместо этого используете **ipv4**. Это не опечатка; это просто то, как это работает. 
Чтобы добавить второй элемент для тех же параметров, используйте знак `+`. Проверьте это, добавив второй DNS-сервер
```bash
nmcli con mod lab-stat +ipv4.dns 8.8.8.8
```
18. Используя `nmcli con mod`, вы также можете изменить такие параметры, как существующий IP-адрес. Попробуйте это
```shell
nmcli con mod lab-stat ipv4.addresses 10.10.0.[LAST_NUMBER]/24
```

19. Чтобы добавить второй IP-адрес, вы снова используете знак `+`: 
```bash
nmcli con mod lab-stat +ipv4.addresses 10.20.30.[LAST_NUMBER]/16
```

20. После изменения свойств подключения их необходимо активировать. Для этого вы можете использовать `nmcli con up lab-stat`.

21. Проверьте доступность сети отправив echo-запрос на центральный сервер лабораторного стенда, используйте для проверки адреса 10.10.0.[TRENER_IP], 10.20.30.[TRENER_IP]
>TRENER_IP= - уточните перед началом лабораторной работы

22. Просмотрите все назначеные на сетевой интерфейс ip-адреса используя `ip a`

>![Screenshot](../img/scr.png) ***Cделайте скриншот экрана c результатом выполнения задания для отправки отчета.***
